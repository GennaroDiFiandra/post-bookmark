{"version":3,"sources":["bookmark-me-button.js","bookmarked-posts-list.js"],"names":["document","addEventListener","button","querySelector","BookmarkMeButtonHandler","handleEvent","async","event","preventDefault","input","getGlobalData","PostRequestData","preparePostRequestData","await","doPostRequest","hideBookmarkMeButton","showBookmarkedPostsButton","ajaxUrl","nonce","BookmarkMeButtonData","postId","target","dataset","postid","userId","userid","url","URL","searchParams","set","payload","search","headers","Headers","Content-Type","options","method","credentials","body","JSON","stringify","response","fetch","ok","Error","status","style","display","classList","contains","add","list","BookmarkedPostsListHandler","updatePostsList","BookmarkedPostsListData","clicked","children","closest","remove"],"mappings":"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","file":"generated-scripts.js","sourcesContent":["\"use strict\";\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const button = document.querySelector(\".bookmark-me-button\");\n  if (!button) return;\n\n  button.addEventListener(\"click\", BookmarkMeButtonHandler);\n});\n\nconst BookmarkMeButtonHandler = {\n\n  handleEvent: async function(event)\n  {\n    event.preventDefault();\n\n    const input = BookmarkMeButtonHandler.getGlobalData(event);\n    const PostRequestData = BookmarkMeButtonHandler.preparePostRequestData(input);\n    await BookmarkMeButtonHandler.doPostRequest(PostRequestData);\n    BookmarkMeButtonHandler.hideBookmarkMeButton(event);\n    BookmarkMeButtonHandler.showBookmarkedPostsButton();\n  },\n\n  getGlobalData: function(event)\n  {\n    // BookmarkMeButtonData is a global variable\n    const {ajaxUrl, nonce} = BookmarkMeButtonData;\n    const postId = event.target.dataset.postid;\n    const userId = event.target.dataset.userid;\n\n    return { ajaxUrl, nonce, postId, userId }\n  },\n\n  preparePostRequestData: function({ ajaxUrl, nonce, postId, userId })\n  {\n    const url = new URL(ajaxUrl);\n    url.searchParams.set(\"action\", \"bookmark_me_button\");\n    url.searchParams.set(\"nonce\", nonce);\n    url.searchParams.set(\"post_id\", postId);\n    url.searchParams.set(\"user_id\", userId);\n    const payload = url.search;\n    const headers = new Headers({\"Content-Type\": \"application/json\"});\n\n    return { url, headers, payload }\n  },\n\n  doPostRequest: async function({ url, headers, payload })\n  {\n    const options = {\n      method: \"POST\",\n      headers: headers,\n      credentials: \"same-origin\",\n      body: JSON.stringify(payload),\n    };\n\n    const response = await fetch(url, options);\n    if (!response.ok) throw new Error(`Status code ${response.status} - bad response from the server`);\n  },\n\n  hideBookmarkMeButton: function(event)\n  {\n    event.target.style.display = \"none\";\n  },\n\n  showBookmarkedPostsButton: function()\n  {\n    const button = document.querySelector(\".bookmarked-posts-button\");\n    if (!button) return;\n\n    if (!button.classList.contains(\"_active\")) button.classList.add(\"_active\");\n  },\n\n};","\"use strict\";\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const list = document.querySelector(\".bookmarked-posts-list\");\n  if (!list) return;\n\n  list.addEventListener(\"click\", BookmarkedPostsListHandler);\n});\n\nconst BookmarkedPostsListHandler = {\n\n  handleEvent: async function(event)\n  {\n    event.preventDefault();\n\n    const input = BookmarkedPostsListHandler.getGlobalData(event);\n    const PostRequestData = BookmarkedPostsListHandler.preparePostRequestData(input);\n    const target = await BookmarkedPostsListHandler.doPostRequest(PostRequestData);\n    BookmarkedPostsListHandler.updatePostsList(target);\n  },\n\n  getGlobalData: function(event)\n  {\n    // BookmarkedPostsListData is a global variable\n    const {ajaxUrl, nonce} = BookmarkedPostsListData;\n\n    const clicked = event.target;\n    if (clicked.classList.contains(\"bookmarked-posts-item\"))\n    {\n      const postId = clicked.children[0].dataset.postid;\n      const userId = clicked.children[0].dataset.userid;\n      const target = clicked;\n\n      return { ajaxUrl, nonce, postId, userId, target }\n    }\n    else if (clicked.classList.contains(\"bookmarked-posts-item-ref\"))\n    {\n      const postId = clicked.dataset.postid;\n      const userId = clicked.dataset.userid;\n      const target = clicked.closest(\".bookmarked-posts-item\");\n\n      return { ajaxUrl, nonce, postId, userId, target }\n    }\n  },\n\n  preparePostRequestData: function({ ajaxUrl, nonce, postId, userId, target })\n  {\n    const url = new URL(ajaxUrl);\n    url.searchParams.set(\"action\", \"bookmarked_posts_list\");\n    url.searchParams.set(\"nonce\", nonce);\n    url.searchParams.set(\"post_id\", postId);\n    url.searchParams.set(\"user_id\", userId);\n    const payload = url.search;\n    const headers = new Headers({\"Content-Type\": \"application/json\"});\n\n    return { url, headers, payload, target }\n  },\n\n  doPostRequest: async function({ url, headers, payload, target })\n  {\n    const options = {\n      method: \"POST\",\n      headers: headers,\n      credentials: \"same-origin\",\n      body: JSON.stringify(payload),\n    };\n\n    const response = await fetch(url, options);\n    if (!response.ok) throw new Error(`Status code ${response.status} - bad response from the server`);\n    return target;\n  },\n\n  updatePostsList: function(target)\n  {\n    target.remove();\n  },\n\n};"]}